<aside class="preview-container" role="region" aria-label="URL Preview">
  <h2>Live Preview</h2>

  @if (urlData(); as data) {
    <div class="preview-box">
      <p class="url-display" role="text" aria-label="Generated URL">{{ data.url }}</p>

      @if (shortenedUrl()) {
        <div class="shortened-url-section">
          <strong class="shortened-label">Shortened URL:</strong>
          <p class="shortened-url-display" role="text" aria-label="Shortened URL">{{ shortenedUrl() }}</p>
        </div>
      }

      <div class="metadata">
        <span class="char-count" aria-label="Character count">
          Characters: {{ data.characterCount }}
        </span>
        <span class="param-count" aria-label="Parameter count">
          Parameters: {{ data.parameterCount }}
        </span>
      </div>
    </div>

    <div class="actions">
      <button
        type="button"
        (click)="onCopy()"
        class="btn btn-secondary"
        aria-label="Copy URL to clipboard">
        Copy URL
      </button>
      <button
        type="button"
        (click)="onShorten()"
        [disabled]="shorteningInProgress()"
        class="btn btn-secondary"
        aria-label="Shorten URL">
        @if (shorteningInProgress()) {
          <span class="spinner"></span>
          Shortening...
        } @else {
          Shorten URL
        }
      </button>
      <button
        type="button"
        (click)="onSave()"
        [disabled]="saveDisabled()"
        class="btn btn-primary"
        aria-label="Save URL build">
        Save Build
      </button>
    </div>
  } @else {
    <p class="placeholder" role="status">
      Enter a valid Base URL to see the preview.
    </p>
  }
</aside>
